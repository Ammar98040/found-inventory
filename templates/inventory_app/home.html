<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุธุงู ุฅุฏุงุฑุฉ ุงููุณุชูุฏุน - ุงูุจุญุซ ุนู ุงูููุชุฌุงุช</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/search_grid.css' %}">
    <link rel="stylesheet" href="{% static 'css/sidebar.css' %}">
    <link rel="stylesheet" href="{% static 'css/quick_search.css' %}">
    <link rel="stylesheet" href="{% static 'css/notifications.css' %}">
    
    <!-- ููุชุจุงุช PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h1>๐ ูุธุงู ุฅุฏุงุฑุฉ ุงููุณุชูุฏุน</h1>
            </div>
            <p class="subtitle">ุงุจุญุซ ุนู ุงูููุชุฌุงุช ุจุณุฑุนุฉ ูู ุฎูุงู ุฃุฑูุงููุง</p>
        </header>

        <div class="main-content">
            <!-- ูุณู ุงูุฅุฏุฎุงู -->
            <div class="input-section">
                <div class="input-group">
                    <label for="product-numbers">ุฃุฏุฎู ุฃุฑูุงู ุงูููุชุฌุงุช (ุณุทุฑ ูุงุญุฏ ููู ููุชุฌ)</label>
                    <textarea 
                        id="product-numbers" 
                        placeholder="ูุซุงู:&#10;BAG-001:10&#10;BAG-002:6" 
                        rows="10"
                        autofocus
                    ></textarea>
                    <small class="hint">
                        <strong>ุงููุงุนุฏุฉ:</strong> ุฑูู ุงูููุชุฌ:ุงููููุฉ<br>
                        ุงููุญุฏุงุช: ุญุจุฉ | ูุตู ุฏุฑุฒู (6) | ุฏุฑุฒู (12)<br>
                        ูุซุงู: BAG-001:12 (ุฏุฑุฒู ูุงูู)
                    </small>
                </div>
                <button id="search-btn" class="btn btn-primary">
                    <span class="btn-icon">๐</span>
                    ุจุญุซ
                </button>
                <button id="clear-btn" class="btn btn-secondary">
                    <span class="btn-icon">๐๏ธ</span>
                    ูุณุญ
                </button>
            </div>

            <!-- ูุณู ุงููุชุงุฆุฌ -->
            <div id="results-section" class="results-section" style="display: none;">
                <div class="results-header">
                    <h2>๐ฆ ูุชุงุฆุฌ ุงูุจุญุซ</h2>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <span id="results-count" class="badge"></span>
                        <button onclick="exportToPDF()" class="btn btn-primary" id="pdf-btn" style="background: #ef4444;">
                            ๐ ุชุตุฏูุฑ PDF
                        </button>
                        <button onclick="printLocations()" class="btn btn-success" id="print-btn" style="background: #10b981;">
                            ๐จ๏ธ ุทุจุงุนุฉ
                        </button>
                    </div>
                </div>
                <div id="results-container"></div>
            </div>

            <!-- ูุณู ุฑุคูุฉ ุงููุณุชูุฏุน -->
            <div id="warehouse-view" class="warehouse-view" style="display: none;">
                <h2 style="margin-bottom: 20px;">๐ข ุนุฑุถ ุงููุณุชูุฏุน</h2>
                <div class="warehouse-grid-wrapper" style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                    <div id="warehouse-grid"></div>
                </div>
            </div>
        </div>

        <!-- ุฑุณุงุฆู ุงูุญุงูุฉ -->
        <div id="loading" class="loading" style="display: none;">
            <div class="spinner"></div>
            <p>ุฌุงุฑู ุงูุจุญุซ...</p>
        </div>

        <div id="error-message" class="alert alert-error" style="display: none;"></div>
    </div>

    <!-- Sidebar -->
    <button id="sidebar-toggle" onclick="toggleSidebar()">โฐ</button>
    
    <div id="sidebar-overlay"></div>
    
    <div id="main-sidebar">
        <div class="sidebar-header">
            <h2>๐งญ ุงูููุงุฆู</h2>
            <button class="sidebar-close" onclick="toggleSidebar()">ร</button>
        </div>
        
        <!-- ุญูู ุงูุจุญุซ -->
        <div class="sidebar-search">
            <input type="text" id="sidebar-search-input" placeholder="๐ ุงุจุญุซ ูู ุงูููุงุฆู..." autocomplete="off">
            <div id="sidebar-search-results"></div>
        </div>
        
        <div class="sidebar-content" id="sidebar-main-content">
            <div class="sidebar-section">
                <div class="sidebar-title">ุงูุฑุฆูุณูุฉ</div>
                <a href="/" class="sidebar-link">
                    <span class="icon">๐</span>
                    <span class="text">ุงูุจุญุซ ุนู ุงูููุชุฌุงุช</span>
                </a>
                <a href="/dashboard/" class="sidebar-link">
                    <span class="icon">๐</span>
                    <span class="text">ููุญุฉ ุงูุชุญูู</span>
                </a>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-title">ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช</div>
                <a href="/products/" class="sidebar-link">
                    <span class="icon">๐ฆ</span>
                    <span class="text">ูุงุฆูุฉ ุงูููุชุฌุงุช</span>
                </a>
                <a href="/products/add/" class="sidebar-link">
                    <span class="icon">โ</span>
                    <span class="text">ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ</span>
                </a>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-title">ุงููุณุชูุฏุน</div>
                <a href="/manage/" class="sidebar-link">
                    <span class="icon">โ๏ธ</span>
                    <span class="text">ุฅุฏุงุฑุฉ ุงููุณุชูุฏุน</span>
                </a>
                <a href="/locations/" class="sidebar-link">
                    <span class="icon">๐</span>
                    <span class="text">ุงูุฃูุงูู</span>
                </a>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-title">ุงูุณุฌูุงุช</div>
                <a href="/audit-logs/" class="sidebar-link">
                    <span class="icon">๐</span>
                    <span class="text">ุณุฌูุงุช ุงูุนูููุงุช</span>
                </a>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-title">ุงูุชูุงุฑูุฑ</div>
                <a href="/daily-reports/" class="sidebar-link">
                    <span class="icon">๐</span>
                    <span class="text">ุงูุชูุงุฑูุฑ ุงูููููุฉ</span>
                </a>
                <a href="/daily-reports-archive/" class="sidebar-link">
                    <span class="icon">๐</span>
                    <span class="text">ุณุฌู ุงูุชูุงุฑูุฑ</span>
                </a>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-title">ุงูุตูุงูุฉ</div>
                <a href="/backup-restore/" class="sidebar-link">
                    <span class="icon">๐พ</span>
                    <span class="text">ุงููุณุฎ ุงูุงุญุชูุงุทู</span>
                </a>
                <a href="/data-deletion/" class="sidebar-link">
                    <span class="icon">๐๏ธ</span>
                    <span class="text">ุญุฐู ุงูุจูุงูุงุช</span>
                </a>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-title">ุงูุฅุญุตุงุฆูุงุช ุงูุญูุฉ</div>
                <div class="stats-container">
                    <!-- ุงูููุชุฌุงุช -->
                    <div class="stat-category">
                        <div class="stat-category-title">๐ฆ ุงูููุชุฌุงุช</div>
                        <div class="stat-item">
                            <div class="stat-icon">๐ฆ</div>
                            <div class="stat-info">
                                <div class="stat-value" id="stats-products">-</div>
                                <div class="stat-label">ุฅุฌูุงูู</div>
                            </div>
                        </div>
                        <div class="stat-item mini">
                            <div class="stat-icon">โ</div>
                            <div class="stat-info">
                                <div class="stat-value" id="stats-products-with-locations">-</div>
                                <div class="stat-label">ููุง ูููุน</div>
                            </div>
                        </div>
                        <div class="stat-item mini">
                            <div class="stat-icon">โ</div>
                            <div class="stat-info">
                                <div class="stat-value" id="stats-products-without-locations">-</div>
                                <div class="stat-label">ุจุฏูู ูููุน</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ุงูุฃูุงูู -->
                    <div class="stat-category">
                        <div class="stat-category-title">๐ ุงูุฃูุงูู</div>
                        <div class="stat-item">
                            <div class="stat-icon">๐</div>
                            <div class="stat-info">
                                <div class="stat-value" id="stats-capacity">-</div>
                                <div class="stat-label">ุงูุณุนุฉ ุงูุฅุฌูุงููุฉ</div>
                            </div>
                        </div>
                        <div class="stat-item mini">
                            <div class="stat-icon">๐ข</div>
                            <div class="stat-info">
                                <div class="stat-value" id="stats-occupied">-</div>
                                <div class="stat-label">ูุดุบููุฉ</div>
                            </div>
                        </div>
                        <div class="stat-item mini">
                            <div class="stat-icon">โช</div>
                            <div class="stat-info">
                                <div class="stat-value" id="stats-empty">-</div>
                                <div class="stat-label">ูุงุฑุบุฉ</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.1); font-size: 0.75rem; color: #94a3b8; text-align: center;">
                        ๐ข Live Mode - ุชุญุฏูุซ ูู 15 ุซุงููุฉ
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ูุงูุฐุฉ ุงูุจุญุซ ุงูุณุฑูุน -->
    <div id="quick-search-overlay">
        <div id="quick-search-modal">
            <div id="quick-search-header">
                <h2>๐ ุงูุจุญุซ ุงูุณุฑูุน</h2>
            </div>
            
            <div id="quick-search-input-container">
                <input 
                    type="text" 
                    id="quick-search-input" 
                    placeholder="ุงุจุญุซ ุนู ููุชุฌุงุช ุฃู ููุงูุน..." 
                    autocomplete="off"
                />
            </div>
            
            <div id="quick-search-results"></div>
            
            <div id="quick-search-shortcuts">
                <div class="shortcut-item">
                    <kbd class="shortcut-key">โ</kbd>
                    <kbd class="shortcut-key">โ</kbd>
                    ููุชููู
                </div>
                <div class="shortcut-item">
                    <kbd class="shortcut-key">โต</kbd>
                    ููุชุญ ุงููุชูุฌุฉ
                </div>
                <div class="shortcut-item">
                    <kbd class="shortcut-key">Esc</kbd>
                    ููุฅุบูุงู
                </div>
            </div>
        </div>
    </div>
    
    <script src="{% static 'js/sidebar.js' %}"></script>
    <script src="{% static 'js/auto_refresh.js' %}"></script>
    <script src="{% static 'js/quick_search.js' %}"></script>
    <script src="{% static 'js/notifications.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
    
    <script>
        // ุนุฑุถ ุฅุดุนุงุฑุงุช ุนูุฏ ุชุญููู ุงูุตูุญุฉ (ููุงุฎุชุจุงุฑ)
        document.addEventListener('DOMContentLoaded', function() {
            // ุฅุดุนุงุฑ ุชุฑุญูุจู
            setTimeout(() => {
                Notifications.info(
                    '๐ ูุธุงู ุงูุจุญุซ ุงูุณุฑูุน',
                    'ุงุถุบุท Ctrl+K ููุจุญุซ',
                    5000
                );
            }, 1000);
        });
        
        // ุฅุดุนุงุฑุงุช ุจุนุฏ ุงูุจุญุซ
        const originalSearchProducts = window.searchProducts;
        if (originalSearchProducts) {
            window.searchProducts = async function(...args) {
                const result = await originalSearchProducts(...args);
                
                if (result && result.length > 0) {
                    Notifications.success(
                        'ุชู ุงูุนุซูุฑ ุนูู ูุชุงุฆุฌ',
                        `${result.length} ููุชุฌ ููุฌูุฏ`,
                        3000
                    );
                } else {
                    Notifications.warning(
                        'ูุง ุชูุฌุฏ ูุชุงุฆุฌ',
                        'ุฌุฑุจ ุงูุจุญุซ ุจูุตุทูุญ ุขุฎุฑ',
                        3000
                    );
                }
                
                return result;
            };
        }
    </script>
</body>
</html>

